"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[968],{656:(e,a,t)=>{t.d(a,{J:()=>i});var r=t(4248);t(4564);var l=t(7498),s=t(1615);function i(e){let{className:a,...t}=e;return(0,r.jsx)(l.b,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}},1172:(e,a,t)=>{t.d(a,{T:()=>s});var r=t(4248);t(4564);var l=t(1615);function s(e){let{className:a,...t}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,l.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...t})}},1287:(e,a,t)=>{t.d(a,{w:()=>i});var r=t(4248);t(4564);var l=t(3613),s=t(1615);function i(e){let{className:a,orientation:t="horizontal",decorative:i=!0,...n}=e;return(0,r.jsx)(l.b,{"data-slot":"separator",decorative:i,orientation:t,className:(0,s.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...n})}},2691:(e,a,t)=>{t.r(a),t.d(a,{MarkerToolsBar:()=>j});var r=t(4248);t(4564);var l=t(3818),s=t(1172),i=t(656),n=t(8842),o=t(5458),c=t(88),d=t(6963),m=t(6127),u=t(9910),x=t(6405),g=t(6064),p=t(9877),h=t(4420),b=t(24),f=t(302);let j=e=>{var a;let{className:t=""}=e,j=(0,b.R)(e=>e.markers.find(a=>a.id===e.activeMarkerId)),v=(0,b.R)(e=>e.updateMarker),w=(0,b.R)(e=>e.markerSidebarVisible),y=(0,b.R)(e=>e.toggleSidebar),N=(e,a)=>{var t;if(!j)return;let r=(null!=(t=j.checklists)?t:[]).map((t,r)=>r===e?a:t);v(j.id,{checklists:r})},k=(0,b.R)(e=>e.layerSidebarVisible);if(!w)return;if(!j)return(0,r.jsx)("div",{className:"".concat(k?"left-[300px]":"left-4"," absolute top-4 left-4 p-4 bg-white bg-opacity-90 rounded-xl shadow-2xl  text-sm border border-gray-200 max-h-[96vh] max-w-[320px] min-w-[320px] overflow-y-auto z-10"),children:(0,r.jsx)("p",{children:"Crea y Selecciona un Marcador para Empezar a Perzonalizarlo"})});let R=(0,f.Rg)(j.icon);return(0,r.jsxs)("div",{className:"".concat(t," ").concat(k?"left-[300px]":"left-4"," absolute top-4 left-4 p-4 bg-white bg-opacity-90 rounded-xl shadow-2xl  text-sm border border-gray-200 max-h-[96vh] max-w-[320px] min-w-[320px] overflow-y-auto z-10"),children:[(0,r.jsx)("div",{className:"flex flex-row items-center justify-between",children:t.length>0?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(c.A,{onClick:()=>y("marker"),className:"absolute right-2 top-2 w-8 h-8",color:"black"})}),(0,r.jsxs)("div",{className:"flex flex-row gap-4 items-center justify-center my-2 text-2xl border-3 py-2 rounded-2xl",style:{background:j.background,color:j.iconColor},children:[(0,r.jsx)(R,{className:"w-8 h-8"}),j.title]}),(0,r.jsxs)(h.nD,{type:"multiple",className:"space-y-2",children:[(0,r.jsxs)(h.As,{value:"marcador",children:[(0,r.jsx)(h.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-center align-middle gap-2",children:[(0,r.jsx)(d.A,{}),"Informacion"]})}),(0,r.jsxs)(h.ub,{className:"space-y-3 pt-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{children:"T\xedtulo"}),(0,r.jsx)(l.p,{value:j.title||"",onChange:e=>v(j.id,{title:e.target.value}),placeholder:"Ej. Casa principal"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{children:"Descripci\xf3n"}),(0,r.jsx)(s.T,{value:j.content||"",onChange:e=>v(j.id,{content:e.target.value}),placeholder:"Notas sobre este marcador..."})]})]})]}),(0,r.jsxs)(h.As,{value:"apariencia",children:[(0,r.jsx)(h.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-center align-middle gap-2",children:[(0,r.jsx)(m.A,{}),"Apariencia"]})}),(0,r.jsxs)(h.ub,{className:"flex flex-col gap-2",children:[(0,r.jsx)(i.J,{children:"Color del Icono"}),(0,r.jsx)(l.p,{className:"w-full",type:"color",value:j.iconColor||"#2563EB",onChange:e=>v(j.id,{iconColor:e.target.value})}),(0,r.jsx)(i.J,{children:"Color del marcador"}),(0,r.jsx)(l.p,{className:"w-full",type:"color",value:j.background||"#2563EB",onChange:e=>v(j.id,{background:e.target.value})}),(0,r.jsx)(i.J,{children:"Radio (m)"}),(0,r.jsx)(l.p,{type:"number",min:0,value:j.radius,onChange:e=>v(j.id,{radius:parseInt(e.target.value)})})]})]}),(0,r.jsxs)(h.As,{value:"checklists",children:[(0,r.jsx)(h.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-center align-middle gap-2",children:[(0,r.jsx)(u.A,{}),"Listas de Tareas"]})}),(0,r.jsxs)(h.ub,{className:"space-y-4 pt-2",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Crea listas de tareas para lugares con elementos para llevar o recoger como productos o papeles."}),null==(a=j.checklists)?void 0:a.map((e,a)=>(0,r.jsxs)("div",{className:"rounded-xl border p-3 bg-muted/30 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(l.p,{value:e.title,onChange:t=>N(a,{...e,title:t.target.value}),placeholder:"Lista de Compras..."}),(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>(e=>{var a;if(!j)return;let t=null==(a=j.checklists)?void 0:a.filter((a,t)=>t!==e);v(j.id,{checklists:t})})(a),children:(0,r.jsx)(x.A,{className:"w-4 h-4 text-red-500"})})]}),e.items.map((t,s)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:t.done,onChange:t=>{let r=[...e.items];r[s].done=t.target.checked,N(a,{...e,items:r})}}),(0,r.jsx)(l.p,{value:t.text,onChange:t=>{let r=[...e.items];r[s].text=t.target.value,N(a,{...e,items:r})},placeholder:"Arroz..."})]},s)),(0,r.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>(e=>{var a,t;if(!j)return;let r=[...null!=(a=j.checklists)?a:[]],l=r[e];l&&(r[e]={...l,items:[...null!=(t=l.items)?t:[],{text:"",done:!1}]},v(j.id,{checklists:r}))})(a),className:"w-full mt-2",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-1"})," Agregar Elemento"]})]},a)),(0,r.jsxs)(n.$,{onClick:()=>{j&&v(j.id,{checklists:[...j.checklists||[],{title:"Nueva Lista",items:[]}]})},variant:"secondary",size:"sm",children:[(0,r.jsx)(g.A,{className:"w-4 h-4 mr-1"})," Crear lista"]})]})]}),(0,r.jsxs)(h.As,{value:"opciones",children:[(0,r.jsx)(h.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-center align-middle gap-2",children:[(0,r.jsx)(p.A,{}),"Opciones"]})}),(0,r.jsx)(h.ub,{className:"space-y-4 pt-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,r.jsx)(i.J,{children:"Habilitar arrastre"}),(0,r.jsx)(o.d,{checked:j.draggable||!1,onCheckedChange:e=>v(j.id,{draggable:e})})]})})]})]})]})}},3818:(e,a,t)=>{t.d(a,{p:()=>s});var r=t(4248);t(4564);var l=t(1615);function s(e){let{className:a,type:t,...s}=e;return(0,r.jsx)("input",{type:t,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...s})}},4420:(e,a,t)=>{t.d(a,{$m:()=>c,As:()=>o,nD:()=>n,ub:()=>d});var r=t(4248);t(4564);var l=t(6081),s=t(130),i=t(1615);function n(e){let{...a}=e;return(0,r.jsx)(l.bL,{"data-slot":"accordion",...a})}function o(e){let{className:a,...t}=e;return(0,r.jsx)(l.q7,{"data-slot":"accordion-item",className:(0,i.cn)("border-b last:border-b-0",a),...t})}function c(e){let{className:a,children:t,...n}=e;return(0,r.jsx)(l.Y9,{className:"flex",children:(0,r.jsxs)(l.l9,{"data-slot":"accordion-trigger",className:(0,i.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",a),...n,children:[t,(0,r.jsx)(s.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function d(e){let{className:a,children:t,...s}=e;return(0,r.jsx)(l.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...s,children:(0,r.jsx)("div",{className:(0,i.cn)("pt-0 pb-4",a),children:t})})}},4905:(e,a,t)=>{t.r(a),t.d(a,{CreateOnMapSideBar:()=>B,InterestSideBar:()=>W,NavigateMapSideBar:()=>G,PublishMapSideBar:()=>$});var r=t(4248),l=t(24),s=t(88),i=t(1513),n=t(8556),o=t(3332),c=t(2242),d=t(7292),m=t(7499),u=t(189),x=t(4420),g=t(302),p=t(4564),h=t(508);let b=[{name:"Duitama, Colombia",lat:5.821944,lng:-73.029722,zoom:14},{name:"Tunja, Boyac\xe1, Colombia",lat:5.5353,lng:-73.3678,zoom:14},{name:"Sogamoso, Boyac\xe1, Colombia",lat:5.7144,lng:-72.9339,zoom:14},{name:"Paipa, Boyac\xe1, Colombia",lat:5.7772,lng:-73.1174,zoom:14},{name:"Villa de Leyva, Boyac\xe1, Colombia",lat:5.6341,lng:-73.5262,zoom:14},{name:"Chiquinquir\xe1, Boyac\xe1, Colombia",lat:5.618,lng:-73.8168,zoom:14},{name:"Tibasosa, Boyac\xe1, Colombia",lat:5.8294,lng:-73.0165,zoom:14},{name:"Roma, Italia",lat:41.9028,lng:12.4964,zoom:12},{name:"Mil\xe1n, Italia",lat:45.4642,lng:9.19,zoom:12},{name:"Venecia, Italia",lat:45.4408,lng:12.3155,zoom:13},{name:"Florencia, Italia",lat:43.7696,lng:11.2558,zoom:13},{name:"N\xe1poles, Italia",lat:40.8518,lng:14.2681,zoom:13},{name:"Par\xeds, Francia",lat:48.8566,lng:2.3522,zoom:12},{name:"Tokio, Jap\xf3n",lat:35.6895,lng:139.6917,zoom:11},{name:"Nueva York, EE. UU.",lat:40.7128,lng:-74.006,zoom:12},{name:"Londres, Reino Unido",lat:51.5074,lng:.1278,zoom:12},{name:"R\xedo de Janeiro, Brasil",lat:-22.9068,lng:-43.1729,zoom:12},{name:"S\xeddney, Australia",lat:-33.8688,lng:151.2093,zoom:12},{name:"El Cairo, Egipto",lat:30.0444,lng:31.2357,zoom:12}],f=()=>{let e=(0,l.R)(e=>e.updateMapState),a=(0,l.R)(e=>e.mapInstance),[t,s]=(0,p.useState)(""),[i,o]=(0,p.useState)(!1),c=(0,p.useRef)(null),d=(0,p.useMemo)(()=>{if(!t)return b;let e=t.toLowerCase();return b.filter(a=>a.name.toLowerCase().includes(e)).slice(0,7)},[t]);return(0,p.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[c]),(0,r.jsxs)("div",{ref:c,className:"relative w-full max-w-sm mx-auto",style:{marginBottom:240*!!i},children:[(0,r.jsxs)("div",{className:"relative flex items-center bg-white rounded-xl shadow-2xl overflow-hidden border border-gray-200",children:[(0,r.jsx)("div",{className:"p-3 text-gray-400",children:(0,r.jsx)(u.A,{className:"w-5 h-5"})}),(0,r.jsx)("input",{type:"text",placeholder:"Usar ubicaci\xf3n...",value:t,onChange:e=>s(e.target.value),onFocus:()=>o(!0),className:"w-full py-3 pr-4 text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-0 text-sm font-semibold"}),(0,r.jsx)("button",{onClick:()=>s(""),className:"p-3 transition-opacity ".concat(t?"opacity-100":"opacity-0 pointer-events-none"),title:"Limpiar b\xfasqueda",children:(0,r.jsx)(h.A,{className:"w-4 h-4 text-gray-500"})})]}),i&&(t||d.length>0)&&(0,r.jsxs)("div",{className:"absolute top-full left-0 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-2xl overflow-hidden z-20 max-h-60 overflow-y-auto",children:[d.map((t,l)=>(0,r.jsxs)("button",{onClick:()=>(t=>{if(s(t.name),o(!1),a){let r={lat:t.lat,lng:t.lng},l=t.zoom;a.setCenter(r),a.setZoom(l),e({center:r,zoom:l})}})(t),className:"flex items-center w-full p-3 text-left text-sm text-gray-700 hover:bg-blue-50 transition-colors",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 mr-3 text-blue-500 flex-shrink-0"}),(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"font-medium",children:t.name})})]},t.name)),0===d.length&&t&&(0,r.jsx)("div",{className:"p-3 text-center text-sm text-gray-500",children:"No se encontraron resultados."})]})]})};var j=t(30),v=t(7452),w=t(3867),y=t(3912),N=t(5866),k=t(8842),R=t(1287);let C=[{key:"DRAW_POINT",name:"Punto",icon:j.A,description:"Define un \xfanico punto en el mapa."},{key:"DRAW_CIRCLE",name:"C\xedrculo",icon:v.A,description:"Dibuja una figura circular con un punto central y radio."},{key:"DRAW_RECTANGLE",name:"Rect\xe1ngulo",icon:w.A,description:"Dibuja un \xe1rea rectangular definida por dos esquinas."}],A=[{key:"DRAW_LINESTRING",name:"L\xednea",icon:y.A,description:"Dibuja un camino compuesto por m\xfaltiples segmentos."},{key:"DRAW_POLYGON",name:"Pol\xedgono (\xc1rea)",icon:N.A,description:"Dibuja una forma cerrada para medir un \xe1rea."}],L=()=>{let e=(0,l.R)(e=>e.activeTool),a=(0,l.R)(e=>e.setActiveTool);return(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsx)("h2",{children:"Figuras Geometricas"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"DRAW_POINT"===e?"Presiona el mapa":"DRAW_CIRCLE"===e?"Presiona en el mapa, luego mueve el cursor para cambiar el tama\xf1o del circulo, vuelve a presionar para terminar":"DRAW_RECTANGLE"===e?"Para dibujar presiona en el mapa, luego arrastra para crear el rectangulo":""}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[C.map(t=>{let{key:l,name:s,icon:i,description:n}=t;return(0,r.jsxs)("button",{onClick:()=>{if(e===l)return a("static");a(l)},title:n,className:"flex flex-col align-middle justify-center items-center flex-1 p-3 rounded-xl border-2 transition-all duration-200 \n              ".concat(e===l?"bg-emerald-600 text-white border-emerald-700 shadow-xl":"bg-white text-gray-700 border-gray-200 hover:bg-emerald-50 hover:border-emerald-300"),children:[(0,r.jsx)(i,{className:"w-6 h-6 mb-2"}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:s})]},l)}),(0,r.jsx)(R.w,{})]}),(0,r.jsx)("h2",{children:"Dibujo Libre"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"DRAW_POLYGON"===e?"*Para guardar presiona el circulo que aparece despues de crear un triangulo":"*Guarda presionando el circulo que aparece despues de dibujar una linea"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-3",children:A.map(t=>{let{key:l,name:s,icon:i,description:n}=t;return(0,r.jsxs)("button",{onClick:()=>{if(e===l)return a("static");a(l)},title:n,className:"flex flex-col align-middle justify-center items-center flex-1 p-3 rounded-xl border-2 transition-all duration-200 \n              ".concat(e===l?"bg-emerald-600 text-white border-emerald-700 shadow-xl":"bg-white text-gray-700 border-gray-200 hover:bg-emerald-50 hover:border-emerald-300"),children:[(0,r.jsx)(i,{className:"w-6 h-6 mb-2"}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:s})]},l)})}),(0,r.jsx)(k.$,{className:"static"===e?"w-full bg-gray-500 hover:bg-gray-400":"w-full bg-red-500 hover:bg-red-400",onClick:()=>a("static"),children:"Parar de Dibujar"})]})};var z=t(3818),D=t(656),I=t(5458),E=t(5539),S=t(1013),_=t(6658);let T=()=>{let[e,a]=(0,p.useState)(!1),t=(0,E.k)(e=>e.user),s=(0,l.R)(e=>e.hasLink),i=(0,l.R)(e=>e.setHasLink),n=(0,l.R)(e=>e.currentMap),o="".concat(window.location.origin,"/share/?id=").concat(null==n?void 0:n.id,"|").concat(null==t?void 0:t.uid);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"flex flex-col gap-5",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("section",{className:"flex flex-row justify-between",children:[(0,r.jsx)("label",{htmlFor:"access-url",children:"URL de Acceso"}),(0,r.jsx)(I.d,{id:"access-url",checked:s,onCheckedChange:i})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Genera un enlace \xfanico que puede ser compartido para acceder directamente al contenido."})]}),s&&(0,r.jsxs)("div",{className:"flex flex-col gap-2 mt-2",children:[(0,r.jsx)("label",{htmlFor:"generated-link-display",className:"text-sm font-medium text-gray-700",children:"Enlace de Acceso P\xfablico"}),(0,r.jsxs)("div",{id:"generated-link-display",className:"flex items-center justify-between w-full p-2 border border-gray-300 rounded-lg bg-gray-50",children:[(0,r.jsx)("span",{className:"text-sm font-mono text-gray-800 truncate",children:o||"Generando enlace..."}),(0,r.jsx)("button",{type:"button",onClick:()=>{o&&(navigator.clipboard.writeText(o),a(!0))},className:"flex-shrink-0 ml-4 p-2  text-sm rounded-md ".concat(e?"bg-emerald-500":"bg-gray-500"," text-white ").concat(e?"hover:bg-emerald-500":"hover:bg-gray-500"," transition-colors"),children:e?(0,r.jsx)(S.A,{height:18,size:20}):(0,r.jsx)(_.A,{height:18,size:20})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Compartir este enlace otorga **acceso de solo lectura** a cualquier persona."})]})]})})},M=()=>{let e=(0,l.R)(e=>e.isVisible),a=(0,l.R)(e=>e.setisVisible);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"flex flex-col gap-5",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)("section",{className:"flex flex-row justify-between",children:[(0,r.jsx)("label",{htmlFor:"publicly-available",children:"Disponible P\xfablicamente"}),(0,r.jsx)(I.d,{id:"publicly-available",checked:e,onCheckedChange:a})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permite que cualquier persona pueda ver este contenido en el mapa publico."})]}),e&&(0,r.jsx)("p",{className:"text-emerald-500 text-sm",children:"Este Mapa es Visible dentro de la Plataforma."})]})})};var F=t(3e3);let P=()=>{let e=(0,l.R)(e=>e.geolocationAvailable),a=(0,l.R)(e=>e.fetchUserLocation),[t,s]=(0,p.useState)(!1),i=async()=>{s(!0),await a(),s(!1)};return(0,r.jsx)("div",{className:"w-full my-2",children:(0,r.jsx)("button",{onClick:i,disabled:t,className:"\n      w-full py-3 px-4 rounded-xl shadow-md font-medium\n      flex items-center justify-center gap-2 transition-all duration-300\n      ".concat(t?"bg-blue-300 text-white cursor-wait":e?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-white text-blue-600 border border-gray-200 hover:bg-blue-500 hover:text-white","\n    "),title:"Centrar en mi ubicaci\xf3n actual",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.A,{className:"h-5 w-5 animate-spin"}),(0,r.jsx)("span",{children:"Ubicando..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Usar mi localizaci\xf3n"})]})})})},W=()=>{let e=(0,l.R)(e=>e.title),a=(0,l.R)(e=>e.objective),t=(0,l.R)(e=>e.description),n=(0,l.R)(e=>e.setTitle),o=(0,l.R)(e=>e.setObjective),c=(0,l.R)(e=>e.setDescription),d=(0,l.R)(e=>e.interestSidebarVisible),m=(0,l.R)(e=>e.toggleSidebar);return d?(0,r.jsxs)("div",{className:"absolute top-4 right-4 p-4 bg-white bg-opacity-90 rounded-xl shadow-2xl border border-gray-200 max-h-[96vh] max-w-[290px] min-w-[290px] overflow-y-auto z-10",children:[(0,r.jsx)(s.A,{onClick:()=>m("interest"),className:"absolute right-2 top-2 w-8 h-8 cursor-pointer",color:"black"}),(0,r.jsxs)("section",{className:"pb-4 flex items-center gap-2",children:[(0,r.jsx)(i.A,{})," ",(0,r.jsx)("p",{children:"Punto de Interes"})]}),(0,r.jsx)(D.J,{children:"Nombre:"}),(0,r.jsx)(z.p,{className:"my-3",type:"text",value:e,onChange:e=>n(e.target.value)}),(0,r.jsx)(D.J,{children:"Objetivo:"}),(0,r.jsx)(z.p,{className:"my-3",type:"text",value:a,onChange:e=>o(e.target.value)}),(0,r.jsx)(D.J,{children:"Descripci\xf3n:"}),(0,r.jsx)("textarea",{className:"my-3 border-2 w-full rounded-md p-2",value:t,onChange:e=>c(e.target.value)})]}):(0,r.jsx)(p.Fragment,{})},B=e=>{let{className:a="",classNameSelector:t=""}=e,i=(0,l.R)(e=>e.createSidebarVisible),c=(0,l.R)(e=>e.toggleSidebar);return i?(0,r.jsxs)("div",{className:"".concat(a," absolute top-4 right-4 p-4 bg-white bg-opacity-90 rounded-xl shadow-2xl border border-gray-200 max-h-[96vh] max-w-[290px] min-w-[290px] overflow-y-auto z-10"),children:[a.length>0?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(s.A,{onClick:()=>c("create"),className:"absolute right-2 top-2 w-8 h-8",color:"black"}),(0,r.jsx)("h2",{className:"mb-4",children:"Marcadores y Geometria "}),(0,r.jsxs)(x.nD,{type:"multiple",children:[(0,r.jsxs)(x.As,{value:"marcadores",children:[(0,r.jsx)(x.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-baseline align-middle gap-2",children:[(0,r.jsx)(n.A,{})," Marcadores"]})}),(0,r.jsx)(x.ub,{children:(0,r.jsx)(g.Ay,{className:t})})]}),(0,r.jsxs)(x.As,{value:"dibujar",children:[(0,r.jsx)(x.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-baseline align-middle gap-2",children:[(0,r.jsx)(o.A,{})," Geometria"]})}),(0,r.jsx)(x.ub,{children:(0,r.jsx)(L,{})})]})]})]}):(0,r.jsx)(p.Fragment,{})},G=()=>{let e=(0,l.R)(e=>e.navigateSidebarVisible),a=(0,l.R)(e=>e.markers),t=(0,l.R)(e=>e.updateMapState),i=(0,l.R)(e=>e.mapInstance),n=(0,l.R)(e=>e.toggleSidebar);return e?(0,r.jsxs)("div",{className:"absolute top-4 right-4 p-4 bg-white bg-opacity-90 rounded-xl shadow-2xl border border-gray-200 max-h-[96vh] max-w-[290px] min-w-[290px] overflow-y-auto z-10",children:[(0,r.jsx)(s.A,{onClick:()=>n("navigate"),className:"absolute right-2 top-2 w-8 h-8",color:"black"}),(0,r.jsxs)(x.nD,{type:"multiple",children:[(0,r.jsx)("h1",{className:"mb-4",children:"Navegacion "}),(0,r.jsxs)(x.As,{value:"Destinos de Interes",children:[(0,r.jsx)(x.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-baseline align-middle gap-2",children:[(0,r.jsx)(c.A,{})," Destinos Populares"]})}),(0,r.jsx)(x.ub,{children:(0,r.jsx)(f,{})})]}),(0,r.jsxs)(x.As,{value:"Destinos marcador",children:[(0,r.jsx)(x.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-baseline align-middle gap-2",children:[(0,r.jsx)(d.A,{})," Ir a Marcador"]})}),(0,r.jsx)(x.ub,{children:(0,r.jsx)("div",{className:"flex flex-col gap-4 overflow-y-auto max-h-[500px] ",children:a.map(e=>(0,r.jsx)("div",{className:"flex items-center justify-between px-2 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition cursor-pointer",onClick:()=>{(e=>{if(i){let a={lat:e.lat,lng:e.lng};i.setCenter(a),i.setZoom(17),t({center:a,zoom:17})}})({lat:e.position.lat,lng:e.position.lng}),console.log(e)},children:(0,r.jsxs)("div",{className:"flex items-center gap-1 p-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full border",style:{background:e.background}}),(0,r.jsx)("div",{className:"flex flex-col max-w-[100px]",children:(0,r.jsx)("span",{className:"font-medium text-gray-800 truncate",children:e.title||"Sin nombre"})})]})},e.id))})})]}),(0,r.jsx)(P,{})]})]}):(0,r.jsx)(p.Fragment,{})},$=()=>{let e=(0,l.R)(e=>e.publishSidebarVisible),a=(0,l.R)(e=>e.toggleSidebar);return e?(0,r.jsxs)("div",{className:"absolute top-4 right-4 p-4 bg-white bg-opacity-90 rounded-xl shadow-2xl border border-gray-200 max-h-[96vh] max-w-[290px] min-w-[290px] overflow-y-auto z-10",children:[(0,r.jsx)(s.A,{onClick:()=>a("publish"),className:"absolute right-2 top-2 w-8 h-8",color:"black"}),(0,r.jsxs)(x.nD,{type:"multiple",children:[(0,r.jsx)("h1",{className:"mb-4 ",children:"Acceso y Configuraci\xf3n "}),(0,r.jsxs)(x.As,{value:"configuracion_private",children:[(0,r.jsx)(x.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-baseline align-middle gap-2",children:[(0,r.jsx)(m.A,{})," Acceso Privado:"]})}),(0,r.jsx)(x.ub,{children:(0,r.jsx)(T,{})})]}),(0,r.jsxs)(x.As,{value:"configuracion_public",children:[(0,r.jsx)(x.$m,{children:(0,r.jsxs)("section",{className:"flex row justify-baseline align-middle gap-2",children:[(0,r.jsx)(u.A,{})," Acceso P\xfablico:"]})}),(0,r.jsx)(x.ub,{children:(0,r.jsx)(M,{})})]})]})]}):(0,r.jsx)(p.Fragment,{})}},5026:(e,a,t)=>{t.d(a,{FullScreenGoogleMapCreate:()=>g,s:()=>p});var r=t(4248),l=t(4564),s=t(2864),i=t(24),n=t(302),o=t(9469),c=t(7199),d=t(4796);let m=e=>{let a={...e,type:"Feature"};if(a.geometry&&"string"==typeof a.geometry.coordinates)try{a.geometry.coordinates=JSON.parse(a.geometry.coordinates)}catch(e){console.error("Failed to parse coordinates string:",e)}return a},u={lat:5.821944,lng:-73.029722},x=()=>{let e=(0,s.ko)(),a=(0,i.R)(e=>e.markers),t=(0,i.R)(e=>e.setMapInstance),u=(0,i.R)(e=>e.updateMarker),x=(0,i.R)(e=>e.updateMapState),g=(0,i.R)(e=>e.placementActive),p=(0,i.R)(e=>e.finalizeMarker),h=(0,i.R)(e=>e.setSidebarVisibility),b=(0,i.R)(e=>e.setActiveMarker),{draw:f}=function(e){let a=(0,i.R)(e=>e.draw),t=(0,i.R)(e=>e.drawings),r=(0,i.R)(e=>e.activeTool),s=(0,i.R)(e=>e.setDrawInstance),n=(0,i.R)(e=>e.updateDrawings),o=(0,i.R)(e=>e.deleteById),u=(0,i.R)(e=>e.deleteRequestId),x=(0,i.R)(e=>e.clearDeleteRequest),g=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{var r;if(!e||!(null==(r=window.google)?void 0:r.maps)||a)return;let l=e.getDiv();if(!l)return void console.error("Map div not available");l.id||(l.id="create_map-id");let i=()=>{if(!e.getProjection()){console.log("Map projection not ready, waiting...");let a=e.addListener("projection_changed",()=>{google.maps.event.removeListener(a),i()});return}try{var a;let r=(a=window.google.maps,new c.bS({adapter:new d.A({lib:a,map:e}),modes:[new c.QN({flags:{arbitary:{feature:{}}}}),new c.iA,new c.N$,new c.b_,new c.cF,new c.mG]}));if(s(r),r.start(),g.current=!0,r.setMode("select"),console.log("TerraDraw initialized and started"),t&&Array.isArray(t)&&t.length>0){console.log("Loading ".concat(t.length," existing drawings..."));let e=t.map(m);r.addFeatures(e)}let l=(e,a)=>{let t=r.getSnapshot();n(t)};return r.on("change",l),()=>{r.off("change",l)}}catch(e){console.error("Failed to setup TerraDraw:",e)}};return i()},[e,a,s,n]),(0,l.useEffect)(()=>()=>{if(a&&g.current){try{a.stop(),console.log("TerraDraw stopped")}catch(e){console.error("Failed to stop TerraDraw:",e)}g.current=!1,s(null)}},[a]),(0,l.useEffect)(()=>{if(!e||!a||!g.current)return;let t=(null==r?void 0:r.startsWith("DRAW_"))&&"DRAW_SELECT"!==r;try{if(t){let e={DRAW_POLYGON:"polygon",DRAW_RECTANGLE:"rectangle",DRAW_LINESTRING:"linestring",DRAW_CIRCLE:"circle",DRAW_POINT:"point"}[r];e&&(a.setMode(e),console.log("Set mode to:",e))}else a.setMode("select"),console.log("Set mode to: select");e.setOptions({draggable:!t,gestureHandling:t?"none":"cooperative",disableDoubleClickZoom:t});let l=e.getDiv();l&&(l.style.cursor=t?"crosshair":"")}catch(e){console.error("Failed to set drawing mode:",e)}},[e,a,r]),(0,l.useEffect)(()=>{if(a&&u){try{if("selected"===u){var e;let t=(null==(e=a.getSelectedIds)?void 0:e.call(a))||[];t.length&&o(t)}else o(u)}catch(e){console.error("Error handling delete request:",e)}x()}},[u,a,o,x]),{draw:a}}(e);return(0,l.useEffect)(()=>{if(e&&a&&a.length>0){let t=a[0];if(t&&t.position&&t.position.lat&&t.position.lng){let a=new window.google.maps.LatLng(t.position.lat,t.position.lng);e.setCenter(a),console.log("Map centered on first marker: Lat ".concat(t.position.lat,", Lng ").concat(t.position.lng))}}},[e]),(0,l.useEffect)(()=>{if(!e)return;let a=e.getDiv();a.id||(a.id="create_map-id"),t(e)},[e,t]),(0,l.useEffect)(()=>{if(!e||!g)return;let a=e.addListener("click",e=>{if(!e.latLng)return;let a={lat:e.latLng.lat(),lng:e.latLng.lng()};g&&p(a)});return()=>a.remove()},[e,g,p]),(0,l.useEffect)(()=>{if(!e)return;let a=e.addListener("idle",()=>{let a=e.getCenter(),t=e.getZoom();a&&x({center:{lat:a.lat(),lng:a.lng()},zoom:null!=t?t:16})});return()=>a.remove()},[e,x]),(0,r.jsx)(r.Fragment,{children:a.map(e=>{let a=(0,n.Rg)(e.icon);return e.visible?(0,r.jsxs)(s.J8,{onClick:()=>{h("layer",!1),h("marker",!0),b(e.id)},position:e.position,title:e.title,className:"p-2 rounded-4xl border-2",style:{background:e.background,borderColor:e.iconColor,color:e.iconColor},draggable:e.draggable,onDrag:a=>{var t,r;let l=null==(t=a.latLng)?void 0:t.lat(),s=null==(r=a.latLng)?void 0:r.lng();void 0!==l&&void 0!==s&&u(e.id,{position:{lat:l,lng:s}})},children:[(0,r.jsx)(a,{className:"h-7 w-7 cursor-pointer ",style:{color:e.iconColor}}),(0,r.jsx)(o.jl,{center:e.position,radius:e.radius})]},e.id):(0,r.jsx)(r.Fragment,{})})})},g=e=>{let{useFullPage:a=!1}=e,t=(0,i.R)(e=>e.center)||u,l=(0,i.R)(e=>e.zoom)||16;return(0,r.jsx)("div",{style:{width:"100%",height:a?"100vh":"92.5vh"},children:(0,r.jsx)(s.T5,{id:"create_map",mapId:"create_map_id",defaultCenter:t,defaultZoom:l,gestureHandling:"cooperative",disableDefaultUI:!0,children:(0,r.jsx)(x,{})})})},p=()=>{let e=(0,i.R)(e=>e.center)||u,a=(0,i.R)(e=>e.zoom)||16;return(0,r.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,r.jsx)(s.T5,{id:"create_map",mapId:"create_map_id",defaultCenter:e,defaultZoom:a,gestureHandling:"cooperative",disableDefaultUI:!0,children:(0,r.jsx)(x,{})})})}},5458:(e,a,t)=>{t.d(a,{d:()=>i});var r=t(4248);t(4564);var l=t(1202),s=t(1615);function i(e){let{className:a,...t}=e;return(0,r.jsx)(l.bL,{"data-slot":"switch",className:(0,s.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,r.jsx)(l.zi,{"data-slot":"switch-thumb",className:(0,s.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},5539:(e,a,t)=>{t.d(a,{k:()=>i});var r=t(2803),l=t(8601),s=t(7927);let i=(0,r.v)((0,l.Zr)((e,a)=>({user:null,isLoggedIn:!1,isLoading:!0,setUserData:a=>{if(a){let t=a.email&&a.email.includes("admin")?"admin":"user";e({user:{...a,role:t},isLoggedIn:!0,isLoading:!1})}else e({user:null,isLoggedIn:!1,isLoading:!1}),localStorage.removeItem("accessToken")},setLoading:a=>e({isLoading:a}),appLogout:async()=>{e({isLoading:!0});try{await (0,s.tV)()}catch(e){console.error("Logout failed:",e)}finally{e({isLoading:!1})}}}),{name:"user-storage",partialize:e=>({user:e.user,isLoggedIn:e.isLoggedIn})}))}}]);