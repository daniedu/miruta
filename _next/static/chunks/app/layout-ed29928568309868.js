(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1003:()=>{},1606:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(4248),i=r(6776),n=r.n(i),o=r(2664),s=r.n(o);r(1003);var l=r(4564);r(6901);var c=r(5539),u=r(7927),d=r(2864),m=r(5519);function g(e){let{children:t}=e,r=(0,c.k)(e=>e.setUserData),{push:i}=(0,m.useRouter)();return(0,l.useEffect)(()=>{console.log("Setting up Firebase Auth Listener...");let e=(0,u.Ph)(r);return(0,u.MS)().then(e=>{e&&(r(e),i("/profile"))}).catch(e=>{console.error("Failed to process redirect sign-in:",e)}),()=>{console.log("Cleaning up Firebase Auth Listener."),e()}},[r]),(0,a.jsxs)("html",{children:[(0,a.jsxs)("head",{children:[(0,a.jsx)("meta",{httpEquiv:"Cross-Origin-Opener-Policy",content:"same-origin-allow-popups"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,a.jsx)("title",{children:"miruta"}),(0,a.jsx)("meta",{name:"description",content:"Crea, Guarda y Comparte rutas o puntos de interes para informar requisitos, necesidades y tareas en tiempo real."}),(0,a.jsx)("meta",{property:"og:title",content:"miruta"}),(0,a.jsx)("meta",{property:"og:description",content:"Crea, Guarda y Comparte rutas o puntos de interes para informar requisitos, necesidades y tareas en tiempo real."}),(0,a.jsx)("meta",{property:"og:type",content:"website"}),(0,a.jsx)("meta",{property:"og:url",content:"https://www.yourdomain.com/"}),(0,a.jsx)("meta",{property:"og:image",content:"https://www.yourdomain.com/social-preview.jpg"}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,a.jsx)("meta",{name:"twitter:site",content:"@YourTwitterHandle"}),(0,a.jsx)("meta",{name:"twitter:title",content:"miruta"}),(0,a.jsx)("meta",{name:"twitter:description",content:"Crea, Guarda y Comparte rutas o puntos de interes para informar requisitos, necesidades y tareas en tiempo real."}),(0,a.jsx)("meta",{name:"twitter:image",content:"https://www.yourdomain.com/twitter-preview.jpg"}),(0,a.jsx)("meta",{name:"theme-color",content:"#FFFFFF"})]}),(0,a.jsx)("body",{className:"".concat(n().variable," ").concat(s().variable," antialiased"),children:(0,a.jsx)(d.c4,{apiKey:"AIzaSyDZvAZlxvN90xbCzS8Ul1kjgaooV-Ctojw",children:t})})]})}},2664:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_e9028a",variable:"__variable_e9028a"}},4581:(e,t,r)=>{"use strict";r.d(t,{y:()=>a});let a=(0,r(254).Wp)({apiKey:"AIzaSyAkX8Y0uLLIRpJsOA2SL_b_JItkfGvQabU",authDomain:"miruta-bf9cc.firebaseapp.com",projectId:"miruta-bf9cc",storageBucket:"miruta-bf9cc.firebasestorage.app",messagingSenderId:"95944970139",appId:"1:95944970139:web:405b199a75d60542b31b3e"})},5519:(e,t,r)=>{"use strict";var a=r(2455);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},5539:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var a=r(2803),i=r(8601),n=r(7927);let o=(0,a.v)((0,i.Zr)((e,t)=>({user:null,isLoggedIn:!1,isLoading:!0,setUserData:t=>{if(t){let r=t.email&&t.email.includes("admin")?"admin":"user";e({user:{...t,role:r},isLoggedIn:!0,isLoading:!1})}else e({user:null,isLoggedIn:!1,isLoading:!1}),localStorage.removeItem("accessToken")},setLoading:t=>e({isLoading:t}),appLogout:async()=>{e({isLoading:!0});try{await (0,n.tV)()}catch(e){console.error("Logout failed:",e)}finally{e({isLoading:!1})}}}),{name:"user-storage",partialize:e=>({user:e.user,isLoggedIn:e.isLoggedIn})}))},6776:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_55ea5f",variable:"__variable_55ea5f"}},7927:(e,t,r)=>{"use strict";r.d(t,{MS:()=>u,Ph:()=>o,Vg:()=>l,ok:()=>s,tV:()=>c});var a=r(1242),i=r(4581);let n=(0,a.xI)(i.y);function o(e){return(0,a.hg)(n,t=>{t?e({uid:t.uid,email:String(t.email||""),displayName:t.displayName||null,emailVerified:t.emailVerified}):e(null)})}async function s(e,t){try{let r=await (0,a.x9)(n,e,t);console.log("created ",r);let i=r.user;return{uid:i.uid,email:String(i.email||""),displayName:i.displayName||null,emailVerified:i.emailVerified}}catch(e){throw console.error("Firebase Sign-In Error:",e),Error("Sign-in failed. Please check your credentials.")}}async function l(){let e=new a.HF;try{let t=(await (0,a.df)(n,e)).user;return{uid:t.uid,email:String(t.email||""),displayName:t.displayName||null,emailVerified:t.emailVerified}}catch(e){if("auth/popup-closed-by-user"===e.code)throw console.log("Google Sign-In cancelled by user."),Error("Google sign-in cancelled.");throw console.error("Firebase Google Sign-In Error:",e),Error("Google sign-in failed. Please try again.")}}async function c(){try{await (0,a.CI)(n)}catch(e){throw console.error("Firebase Sign-Out Error:",e),Error("Sign-out failed.")}}async function u(){let e=(0,a.xI)();try{let t=await (0,a.Q4)(e);if(t){let e=t.user,r={uid:e.uid,email:String(e.email||""),displayName:e.displayName||null,emailVerified:e.emailVerified};return console.log("Redirect sign-in successful:",r.email),r}return null}catch(e){throw Error("Google sign-in failed. Please try again.")}}},8601:(e,t,r)=>{"use strict";r.d(t,{Zr:()=>i});let a=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>a(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>a(t)(e)}}},i=(e,t)=>(r,i,n)=>{let o,s={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),i=null!=(t=r.getItem(e))?t:null;return i instanceof Promise?i.then(a):a(i)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},l=!1,c=new Set,u=new Set,d=s.storage;if(!d)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...e)},i,n);let m=()=>{let e=s.partialize({...i()});return d.setItem(s.name,{state:e,version:s.version})},g=n.setState;n.setState=(e,t)=>(g(e,t),m());let p=e((...e)=>(r(...e),m()),i,n);n.getInitialState=()=>p;let f=()=>{var e,t;if(!d)return;l=!1,c.forEach(e=>{var t;return e(null!=(t=i())?t:p)});let n=(null==(t=s.onRehydrateStorage)?void 0:t.call(s,null!=(e=i())?e:p))||void 0;return a(d.getItem.bind(d))(s.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===s.version)return[!1,e.state];else{if(s.migrate){let t=s.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,n]=e;if(r(o=s.merge(n,null!=(t=i())?t:p),!0),a)return m()}).then(()=>{null==n||n(o,void 0),o=i(),l=!0,u.forEach(e=>e(o))}).catch(e=>{null==n||n(void 0,e)})};return n.persist={setOptions:e=>{s={...s,...e},e.storage&&(d=e.storage)},clearStorage:()=>{null==d||d.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>f(),hasHydrated:()=>l,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},s.skipHydration||f(),o||p}},9815:(e,t,r)=>{Promise.resolve().then(r.bind(r,1606))}},e=>{e.O(0,[718,643,712,997,647,516,358],()=>e(e.s=9815)),_N_E=e.O()}]);