(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96684,e=>{"use strict";e.s(["LeftCircleMarkerLayer",()=>ei,"RightCircleMarkerLayer",()=>eo],96684);var t=e.i(78196),n=e.i(49430),r=e.i(91967),l=e.i(86350),a=e.i(92104),i=e.i(54288),o=e.i(60212),s=e.i(24900),u=e.i(63877),c=e.i(48704),d=e.i(58142),f=e.i(20334),p=e.i(40738),h=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),m=n.forwardRef((e,n)=>(0,t.jsx)(d.Primitive.span,{...e,ref:n,style:{...h,...e.style}}));m.displayName="VisuallyHidden";var[g,x]=(0,a.createContextScope)("Tooltip",[s.createPopperScope]),v=(0,s.createPopperScope)(),y="TooltipProvider",b="tooltip.open",[w,z]=g(y),k=e=>{let{__scopeTooltip:r,delayDuration:l=700,skipDelayDuration:a=300,disableHoverableContent:i=!1,children:o}=e,s=n.useRef(!0),u=n.useRef(!1),c=n.useRef(0);return n.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,t.jsx)(w,{scope:r,isOpenDelayedRef:s,delayDuration:l,onOpen:n.useCallback(()=>{window.clearTimeout(c.current),s.current=!1},[]),onClose:n.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>s.current=!0,a)},[a]),isPointerInTransitRef:u,onPointerInTransitChange:n.useCallback(e=>{u.current=e},[]),disableHoverableContent:i,children:o})};k.displayName=y;var j="Tooltip",[C,S]=g(j),E=e=>{let{__scopeTooltip:r,children:l,open:a,defaultOpen:i,onOpenChange:u,disableHoverableContent:c,delayDuration:d}=e,f=z(j,e.__scopeTooltip),h=v(r),[m,g]=n.useState(null),x=(0,o.useId)(),y=n.useRef(0),w=null!=c?c:f.disableHoverableContent,k=null!=d?d:f.delayDuration,S=n.useRef(!1),[E,N]=(0,p.useControllableState)({prop:a,defaultProp:null!=i&&i,onChange:e=>{e?(f.onOpen(),document.dispatchEvent(new CustomEvent(b))):f.onClose(),null==u||u(e)},caller:j}),M=n.useMemo(()=>E?S.current?"delayed-open":"instant-open":"closed",[E]),I=n.useCallback(()=>{window.clearTimeout(y.current),y.current=0,S.current=!1,N(!0)},[N]),P=n.useCallback(()=>{window.clearTimeout(y.current),y.current=0,N(!1)},[N]),R=n.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{S.current=!0,N(!0),y.current=0},k)},[k,N]);return n.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),(0,t.jsx)(s.Root,{...h,children:(0,t.jsx)(C,{scope:r,contentId:x,open:E,stateAttribute:M,trigger:m,onTriggerChange:g,onTriggerEnter:n.useCallback(()=>{f.isOpenDelayedRef.current?R():I()},[f.isOpenDelayedRef,R,I]),onTriggerLeave:n.useCallback(()=>{w?P():(window.clearTimeout(y.current),y.current=0)},[P,w]),onOpen:I,onClose:P,disableHoverableContent:w,children:l})})};E.displayName=j;var N="TooltipTrigger",M=n.forwardRef((e,a)=>{let{__scopeTooltip:i,...o}=e,u=S(N,i),c=z(N,i),f=v(i),p=n.useRef(null),h=(0,l.useComposedRefs)(a,p,u.onTriggerChange),m=n.useRef(!1),g=n.useRef(!1),x=n.useCallback(()=>m.current=!1,[]);return n.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),(0,t.jsx)(s.Anchor,{asChild:!0,...f,children:(0,t.jsx)(d.Primitive.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...o,ref:h,onPointerMove:(0,r.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(g.current||c.isPointerInTransitRef.current||(u.onTriggerEnter(),g.current=!0))}),onPointerLeave:(0,r.composeEventHandlers)(e.onPointerLeave,()=>{u.onTriggerLeave(),g.current=!1}),onPointerDown:(0,r.composeEventHandlers)(e.onPointerDown,()=>{u.open&&u.onClose(),m.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{m.current||u.onOpen()}),onBlur:(0,r.composeEventHandlers)(e.onBlur,u.onClose),onClick:(0,r.composeEventHandlers)(e.onClick,u.onClose)})})});M.displayName=N;var I="TooltipPortal",[P,R]=g(I,{forceMount:void 0}),A=e=>{let{__scopeTooltip:n,forceMount:r,children:l,container:a}=e,i=S(I,n);return(0,t.jsx)(P,{scope:n,forceMount:r,children:(0,t.jsx)(c.Presence,{present:r||i.open,children:(0,t.jsx)(u.Portal,{asChild:!0,container:a,children:l})})})};A.displayName=I;var L="TooltipContent",T=n.forwardRef((e,n)=>{let r=R(L,e.__scopeTooltip),{forceMount:l=r.forceMount,side:a="top",...i}=e,o=S(L,e.__scopeTooltip);return(0,t.jsx)(c.Presence,{present:l||o.open,children:o.disableHoverableContent?(0,t.jsx)(B,{side:a,...i,ref:n}):(0,t.jsx)(D,{side:a,...i,ref:n})})}),D=n.forwardRef((e,r)=>{let a=S(L,e.__scopeTooltip),i=z(L,e.__scopeTooltip),o=n.useRef(null),s=(0,l.useComposedRefs)(r,o),[u,c]=n.useState(null),{trigger:d,onClose:f}=a,p=o.current,{onPointerInTransitChange:h}=i,m=n.useCallback(()=>{c(null),h(!1)},[h]),g=n.useCallback((e,t)=>{let n=e.currentTarget,r={x:e.clientX,y:e.clientY},l=function(e,t){let n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),l=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,l,a)){case a:return"left";case l:return"right";case n:return"top";case r:return"bottom";default:throw Error("unreachable")}}(r,n.getBoundingClientRect());c(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let n=0;n<e.length;n++){let r=e[n];for(;t.length>=2;){let e=t[t.length-1],n=t[t.length-2];if((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x))t.pop();else break}t.push(r)}t.pop();let n=[];for(let t=e.length-1;t>=0;t--){let r=e[t];for(;n.length>=2;){let e=n[n.length-1],t=n[n.length-2];if((e.x-t.x)*(r.y-t.y)>=(e.y-t.y)*(r.x-t.x))n.pop();else break}n.push(r)}return(n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y)?t:t.concat(n)}(t)}([...function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,l),...function(e){let{top:t,right:n,bottom:r,left:l}=e;return[{x:l,y:t},{x:n,y:t},{x:n,y:r},{x:l,y:r}]}(t.getBoundingClientRect())])),h(!0)},[h]);return n.useEffect(()=>()=>m(),[m]),n.useEffect(()=>{if(d&&p){let e=e=>g(e,p),t=e=>g(e,d);return d.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{d.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}},[d,p,g,m]),n.useEffect(()=>{if(u){let e=e=>{let t=e.target,n={x:e.clientX,y:e.clientY},r=(null==d?void 0:d.contains(t))||(null==p?void 0:p.contains(t)),l=!function(e,t){let{x:n,y:r}=e,l=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let i=t[e],o=t[a],s=i.x,u=i.y,c=o.x,d=o.y;u>r!=d>r&&n<(c-s)*(r-u)/(d-u)+s&&(l=!l)}return l}(n,u);r?m():l&&(m(),f())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[d,p,u,f,m]),(0,t.jsx)(B,{...e,ref:s})}),[H,O]=g(j,{isInside:!1}),F=(0,f.createSlottable)("TooltipContent"),B=n.forwardRef((e,r)=>{let{__scopeTooltip:l,children:a,"aria-label":o,onEscapeKeyDown:u,onPointerDownOutside:c,...d}=e,f=S(L,l),p=v(l),{onClose:h}=f;return n.useEffect(()=>(document.addEventListener(b,h),()=>document.removeEventListener(b,h)),[h]),n.useEffect(()=>{if(f.trigger){let e=e=>{let t=e.target;(null==t?void 0:t.contains(f.trigger))&&h()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[f.trigger,h]),(0,t.jsx)(i.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:e=>e.preventDefault(),onDismiss:h,children:(0,t.jsxs)(s.Content,{"data-state":f.stateAttribute,...p,...d,ref:r,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,t.jsx)(F,{children:a}),(0,t.jsx)(H,{scope:l,isInside:!0,children:(0,t.jsx)(m,{id:f.contentId,role:"tooltip",children:o||a})})]})})});T.displayName=L;var G="TooltipArrow",_=n.forwardRef((e,n)=>{let{__scopeTooltip:r,...l}=e,a=v(r);return O(G,r).isInside?null:(0,t.jsx)(s.Arrow,{...a,...l,ref:n})});_.displayName=G;var V=e.i(80064);function J(e){let{delayDuration:n=0,...r}=e;return(0,t.jsx)(k,{"data-slot":"tooltip-provider",delayDuration:n,...r})}function W(e){let{...n}=e;return(0,t.jsx)(J,{children:(0,t.jsx)(E,{"data-slot":"tooltip",...n})})}function q(e){let{...n}=e;return(0,t.jsx)(M,{"data-slot":"tooltip-trigger",...n})}function U(e){let{className:n,sideOffset:r=0,children:l,...a}=e;return(0,t.jsx)(A,{children:(0,t.jsxs)(T,{"data-slot":"tooltip-content",sideOffset:r,className:(0,V.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",n),...a,children:[l,(0,t.jsx)(_,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var X=e.i(54352);let K=(0,X.default)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);var Y=e.i(80961);let Q=(0,X.default)("map-plus",[["path",{d:"m11 19-1.106-.552a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0l4.212 2.106a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619V12",key:"svfegj"}],["path",{d:"M15 5.764V12",key:"1ocw4k"}],["path",{d:"M18 15v6",key:"9wciyi"}],["path",{d:"M21 18h-6",key:"139f0c"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var Z=e.i(29393);let $=(0,X.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ee=(0,X.default)("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]);var et=e.i(2589),en=e.i(13080),er=e.i(6040),el=e.i(97626),ea=e.i(87968);let ei=e=>{let{elements:n=[{id:"1",title:"Marcadores",customIcon:(0,t.jsx)(Z.Pin,{className:"w-10 h-10 text-gray-700"}),sidebar:"marker"},{id:"3",title:"Capas",customIcon:(0,t.jsx)(K,{className:"w-10 h-10 text-gray-700"}),sidebar:"layer"}]}=e,r=(0,en.useMapStore)(e=>e.toggleSidebar);return(0,t.jsx)(J,{children:(0,t.jsx)("div",{className:"absolute top-4 left-4 flex flex-col gap-3 p-2 pointer-events-auto z-1",children:n.map(e=>(0,t.jsxs)(W,{children:[(0,t.jsx)(q,{asChild:!0,children:(0,t.jsx)("button",{onClick:()=>null==r?void 0:r(e.sidebar),className:"w-18   h-18   rounded-full bg-white flex items-center justify-center shadow-md border border-gray-200 transform transition-transform duration-200 hover:scale-110 cursor-pointer",children:e.customIcon?e.customIcon:(0,t.jsx)(Z.Pin,{className:"w-5 h-5 text-gray-700"})})}),(0,t.jsx)(U,{side:"right",className:"text-xs",children:e.title||"Sin título"})]},e.id))})})},eo=e=>{let{elements:r=[{id:"1",title:"Punto de Interes",customIcon:(0,t.jsx)(et.TargetIcon,{className:"w-10 h-10 text-gray-700"}),sidebar:"interest"},{id:"2",title:"Marcadores y Dibujos",customIcon:(0,t.jsx)(Q,{className:"w-10 h-10 text-gray-700"}),sidebar:"create"},{id:"3",title:"Navegacion",customIcon:(0,t.jsx)(Y.MapPinnedIcon,{className:"w-10 h-10 text-gray-700"}),sidebar:"navigate"},{id:"4",title:"Publicar o Compartir",customIcon:(0,t.jsx)(ee,{className:"w-10 h-10 text-gray-700"}),sidebar:"publish"}]}=e,[l,a]=(0,n.useState)(!1),i=(0,en.useMapStore)(e=>e.toggleSidebar),o=(0,er.useUserStore)(e=>e.user),s=(0,en.useMapStore)(e=>e.currentMap),u=(0,en.useMapStore)(e=>e.updateCurrentMapMetadata),c=(0,en.useMapStore)(e=>e.title),d=(0,en.useMapStore)(e=>e.objective),f=(0,en.useMapStore)(e=>e.description),p=(0,en.useMapStore)(e=>e.markers),h=(0,en.useMapStore)(e=>e.drawings),m=e=>{let t=JSON.parse(JSON.stringify(e));return t.geometry&&Array.isArray(t.geometry.coordinates)&&(t.geometry.coordinates=JSON.stringify(t.geometry.coordinates)),t};return(0,t.jsx)(J,{children:(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col gap-3 p-2 pointer-events-auto z-1",children:[r.map(e=>(0,t.jsxs)(W,{children:[(0,t.jsx)(q,{asChild:!0,children:(0,t.jsx)("button",{onClick:()=>null==i?void 0:i(e.sidebar),className:"w-18   h-18   rounded-full bg-white flex items-center justify-center shadow-md border border-gray-200 transform transition-transform duration-200 hover:scale-110 cursor-pointer",children:e.customIcon?e.customIcon:(0,t.jsx)(Z.Pin,{className:"w-5 h-5 text-gray-700"})})}),(0,t.jsx)(U,{side:"right",className:"text-xs",children:e.title||"Sin título"})]},e.id)),(0,t.jsxs)(W,{children:[(0,t.jsx)(q,{asChild:!0,children:(0,t.jsx)("button",{onClick:async()=>{a(!0);let e=p[0]||{lat:0,lng:0},t=h.map(m),n={id:null==s?void 0:s.id,lat:e.position.lat,lng:e.position.lng,title:c,objective:d,description:f,markers:p,drawings:t};try{if((null==s?void 0:s.mode)==="new"){let e=await (0,el.createPOI)(null==o?void 0:o.uid,{id:n.id});console.log(e),u({mode:"edit",id:e}),await (0,el.updatePOI)(null==o?void 0:o.uid,e,{...n,id:e}),console.log("New POI created successfully.")}else(null==s?void 0:s.mode)==="edit"?(await (0,el.updatePOI)(null==o?void 0:o.uid,s.id,n),console.log("POI updated successfully.")):console.warn("Attempted to save with unknown map mode:",null==s?void 0:s.mode)}catch(e){console.error("Error during POI save operation:",e)}finally{a(!1)}},className:"w-18 h-18 rounded-full bg-white flex items-center justify-center shadow-md border border-gray-200 transform transition-transform duration-200 hover:scale-110 cursor-pointer",children:l?(0,t.jsx)(ea.Spinner,{}):(0,t.jsx)($,{className:"w-10 h-10 text-gray-700"})})}),(0,t.jsx)(U,{side:"right",className:"text-xs",children:"Guardar"})]},"guardar")]})})}},36129,e=>{"use strict";let t,n;e.s(["LayerManagerPanel",()=>eO,"getTypeIcon",()=>eF],36129);var r=e.i(78196),l=e.i(49430),a=e.i(19455),i=e.i(29393),o=e.i(54352);let s=(0,o.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var u=e.i(20125),c=e.i(1309);let d=(0,o.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var f=e.i(2483),p=e.i(67815),h=e.i(42880),m=e.i(20336),g=e.i(73885),x=e.i(75410),v=e.i(13080);let y=(0,o.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),b=(0,l.createContext)(null);b.displayName="PanelGroupContext";let w={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},z=l.useLayoutEffect,k=l["useId".toString()],j="function"==typeof k?k:()=>null,C=0;function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=j(),n=(0,l.useRef)(e||t||null);return null===n.current&&(n.current=""+C++),null!=e?e:n.current}function E(e){let{children:t,className:n="",collapsedSize:r,collapsible:a,defaultSize:i,forwardedRef:o,id:s,maxSize:u,minSize:c,onCollapse:d,onExpand:f,onResize:p,order:h,style:m,tagName:g="div",...x}=e,v=(0,l.useContext)(b);if(null===v)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:y,expandPanel:k,getPanelSize:j,getPanelStyle:C,groupId:E,isPanelCollapsed:N,reevaluatePanelConstraints:M,registerPanel:I,resizePanel:P,unregisterPanel:R}=v,A=S(s),L=(0,l.useRef)({callbacks:{onCollapse:d,onExpand:f,onResize:p},constraints:{collapsedSize:r,collapsible:a,defaultSize:i,maxSize:u,minSize:c},id:A,idIsFromProps:void 0!==s,order:h});(0,l.useRef)({didLogMissingDefaultSizeWarning:!1}),z(()=>{let{callbacks:e,constraints:t}=L.current,n={...t};L.current.id=A,L.current.idIsFromProps=void 0!==s,L.current.order=h,e.onCollapse=d,e.onExpand=f,e.onResize=p,t.collapsedSize=r,t.collapsible=a,t.defaultSize=i,t.maxSize=u,t.minSize=c,(n.collapsedSize!==t.collapsedSize||n.collapsible!==t.collapsible||n.maxSize!==t.maxSize||n.minSize!==t.minSize)&&M(L.current,n)}),z(()=>{let e=L.current;return I(e),()=>{R(e)}},[h,A,I,R]),(0,l.useImperativeHandle)(o,()=>({collapse:()=>{y(L.current)},expand:e=>{k(L.current,e)},getId:()=>A,getSize:()=>j(L.current),isCollapsed:()=>N(L.current),isExpanded:()=>!N(L.current),resize:e=>{P(L.current,e)}}),[y,k,j,N,A,P]);let T=C(L.current,i);return(0,l.createElement)(g,{...x,children:t,className:n,id:A,style:{...T,...m},[w.groupId]:E,[w.panel]:"",[w.panelCollapsible]:a||void 0,[w.panelId]:A,[w.panelSize]:parseFloat(""+T.flexGrow).toFixed(1)})}let N=(0,l.forwardRef)((e,t)=>(0,l.createElement)(E,{...e,forwardedRef:t}));E.displayName="Panel",N.displayName="forwardRef(Panel)";let M=null,I=-1,P=null;function R(e,n,r){var l,a,i;let o=function(e,t,n){let r=(t&_)!=0,l=(t&V)!=0,a=(t&J)!=0,i=(t&W)!=0;if(t){if(r)if(a)return"se-resize";else if(i)return"ne-resize";else return"e-resize";else if(l)if(a)return"sw-resize";else if(i)return"nw-resize";else return"w-resize";else if(a)return"s-resize";else if(i)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,n,0);M!==o&&(M=o,null===P&&(P=document.createElement("style"),t&&P.setAttribute("nonce",t),document.head.appendChild(P)),I>=0&&(null==(i=P.sheet)||i.removeRule(I)),I=null!=(l=null==(a=P.sheet)?void 0:a.insertRule("*{cursor: ".concat(o," !important;}")))?l:-1)}function A(e){return"keydown"===e.type}function L(e){return e.type.startsWith("pointer")}function T(e){return e.type.startsWith("mouse")}function D(e){if(L(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(T(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}let H=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function O(e){let t=e.length;for(;t--;){let n=e[t];if(ei(n,"Missing node"),function(e){let t=getComputedStyle(e);return!!("fixed"===t.position||"auto"!==t.zIndex&&("static"!==t.position||function(e){var t;let n=getComputedStyle(null!=(t=G(e))?t:e).display;return"flex"===n||"inline-flex"===n}(e))||1>+t.opacity||"transform"in t&&"none"!==t.transform||"webkitTransform"in t&&"none"!==t.webkitTransform||"mixBlendMode"in t&&"normal"!==t.mixBlendMode||"filter"in t&&"none"!==t.filter||"webkitFilter"in t&&"none"!==t.webkitFilter||"isolation"in t&&"isolate"===t.isolation||H.test(t.willChange))||"touch"===t.webkitOverflowScrolling}(n))return n}return null}function F(e){return e&&Number(getComputedStyle(e).zIndex)||0}function B(e){let t=[];for(;e;)t.push(e),e=G(e);return t}function G(e){let{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}let _=1,V=2,J=4,W=8,q="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}(),U=[],X=!1,K=new Map,Y=new Map,Q=new Set;function Z(e){let{target:t}=e,{x:n,y:r}=D(e);X=!0,en({target:t,x:n,y:r}),el(),U.length>0&&(ea("down",e),er(),e.preventDefault(),et(t)||e.stopImmediatePropagation())}function $(e){let{x:t,y:n}=D(e);if(X&&"pointerleave"!==e.type&&0===e.buttons&&(X=!1,ea("up",e)),!X){let{target:r}=e;en({target:r,x:t,y:n})}ea("move",e),er(),U.length>0&&e.preventDefault()}function ee(e){let{target:t}=e,{x:n,y:r}=D(e);Y.clear(),X=!1,U.length>0&&(e.preventDefault(),et(t)||e.stopImmediatePropagation()),ea("up",e),en({target:t,x:n,y:r}),er(),el()}function et(e){let t=e;for(;t;){if(t.hasAttribute(w.resizeHandle))return!0;t=t.parentElement}return!1}function en(e){let{target:t,x:n,y:r}=e;U.splice(0);let l=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(l=t),Q.forEach(e=>{let{element:t,hitAreaMargins:a}=e,i=t.getBoundingClientRect(),{bottom:o,left:s,right:u,top:c}=i,d=q?a.coarse:a.fine;if(n>=s-d&&n<=u+d&&r>=c-d&&r<=o+d){if(null!==l&&document.contains(l)&&t!==l&&!t.contains(l)&&!l.contains(t)&&function(e,t){let n;if(e===t)throw Error("Cannot compare node with itself");let r={a:B(e),b:B(t)};for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),n=e;ei(n,"Stacking order can only be calculated for elements with a common ancestor");let l={a:F(O(r.a)),b:F(O(r.b))};if(l.a===l.b){let e=n.childNodes,t={a:r.a.at(-1),b:r.b.at(-1)},l=e.length;for(;l--;){let n=e[l];if(n===t.a)return 1;if(n===t.b)return -1}}return Math.sign(l.a-l.b)}(l,t)>0){let e=l,n=!1;for(;e;){var f;if(e.contains(t))break;if(f=e.getBoundingClientRect(),f.x<i.x+i.width&&f.x+f.width>i.x&&f.y<i.y+i.height&&f.y+f.height>i.y){n=!0;break}e=e.parentElement}if(n)return}U.push(e)}})}function er(){let e=!1,t=!1;U.forEach(n=>{let{direction:r}=n;"horizontal"===r?e=!0:t=!0});let n=0;Y.forEach(e=>{n|=e}),e&&t?R("intersection",n,X):e?R("horizontal",n,X):t?R("vertical",n,X):null!==P&&(document.head.removeChild(P),M=null,P=null,I=-1)}function el(){var e;null==(e=n)||e.abort();let t={capture:!0,signal:(n=new AbortController).signal};Q.size&&(X?(U.length>0&&K.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener("contextmenu",ee,t),r.addEventListener("pointerleave",$,t),r.addEventListener("pointermove",$,t))}),K.forEach((e,n)=>{let{body:r}=n;r.addEventListener("pointerup",ee,t),r.addEventListener("pointercancel",ee,t)})):K.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener("pointerdown",Z,t),r.addEventListener("pointermove",$,t))}))}function ea(e,t){Q.forEach(n=>{let{setResizeHandlerState:r}=n;r(e,U.includes(n),t)})}function ei(e,t){if(!e)throw console.error(t),Error(t)}function eo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function es(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return 0===eo(e,t,n)}function eu(e,t,n){return 0===eo(e,t,n)}function ec(e){let{panelConstraints:t,panelIndex:n,size:r}=e,l=t[n];ei(null!=l,"Panel constraints not found for index ".concat(n));let{collapsedSize:a=0,collapsible:i,maxSize:o=100,minSize:s=0}=l;return 0>eo(r,s)&&(r=i&&0>eo(r,(a+s)/2)?a:s),r=parseFloat((r=Math.min(o,r)).toFixed(10))}function ed(e){let{delta:t,initialLayout:n,panelConstraints:r,pivotIndices:l,prevLayout:a,trigger:i}=e;if(eu(t,0))return n;let o=[...n],[s,u]=l;ei(null!=s,"Invalid first pivot index"),ei(null!=u,"Invalid second pivot index");let c=0;if("keyboard"===i){{let e=t<0?u:s,l=r[e];ei(l,"Panel constraints not found for index ".concat(e));let{collapsedSize:a=0,collapsible:i,minSize:o=0}=l;if(i){let r=n[e];if(ei(null!=r,"Previous layout not found for panel index ".concat(e)),eu(r,a)){let e=o-r;eo(e,Math.abs(t))>0&&(t=t<0?0-e:e)}}}{let e=t<0?s:u,l=r[e];ei(l,"No panel constraints found for index ".concat(e));let{collapsedSize:a=0,collapsible:i,minSize:o=0}=l;if(i){let r=n[e];if(ei(null!=r,"Previous layout not found for panel index ".concat(e)),eu(r,o)){let e=r-a;eo(e,Math.abs(t))>0&&(t=t<0?0-e:e)}}}}{let e=t<0?1:-1,l=t<0?u:s,a=0;for(;;){let t=n[l];if(ei(null!=t,"Previous layout not found for panel index ".concat(l)),a+=ec({panelConstraints:r,panelIndex:l,size:100})-t,(l+=e)<0||l>=r.length)break}let i=Math.min(Math.abs(t),Math.abs(a));t=t<0?0-i:i}{let e=t<0?s:u;for(;e>=0&&e<r.length;){let l=Math.abs(t)-Math.abs(c),a=n[e];ei(null!=a,"Previous layout not found for panel index ".concat(e));let i=ec({panelConstraints:r,panelIndex:e,size:a-l});if(!eu(a,i)&&(c+=a-i,o[e]=i,c.toFixed(3).localeCompare(Math.abs(t).toFixed(3),void 0,{numeric:!0})>=0))break;t<0?e--:e++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!eu(e[n],t[n],void 0))return!1;return!0}(a,o))return a;{let e=t<0?u:s,l=n[e];ei(null!=l,"Previous layout not found for panel index ".concat(e));let a=l+c,i=ec({panelConstraints:r,panelIndex:e,size:a});if(o[e]=i,!eu(i,a)){let e=a-i,n=t<0?u:s;for(;n>=0&&n<r.length;){let l=o[n];ei(null!=l,"Previous layout not found for panel index ".concat(n));let a=ec({panelConstraints:r,panelIndex:n,size:l+e});if(eu(l,a)||(e-=a-l,o[n]=a),eu(e,0))break;t>0?n--:n++}}}return eu(o.reduce((e,t)=>t+e,0),100)?o:a}function ef(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(t.querySelectorAll("[".concat(w.resizeHandleId,'][data-panel-group-id="').concat(e,'"]')))}function ep(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r=ef(e,n).findIndex(e=>e.getAttribute(w.resizeHandleId)===t);return null!=r?r:null}function eh(e,t,n){let r=ep(e,t,n);return null!=r?[r,r+1]:[-1,-1]}function em(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if((t instanceof HTMLElement||"object"==typeof t&&null!==t&&"tagName"in t&&"getAttribute"in t)&&t.dataset.panelGroupId==e)return t;let n=t.querySelector('[data-panel-group][data-panel-group-id="'.concat(e,'"]'));return n||null}function eg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=t.querySelector("[".concat(w.resizeHandleId,'="').concat(e,'"]'));return n||null}function ex(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ev(e,t){let{x:n,y:r}=D(t);return"horizontal"===e?n:r}function ey(e,t,n){t.forEach((t,r)=>{let l=e[r];ei(l,"Panel data not found for index ".concat(r));let{callbacks:a,constraints:i,id:o}=l,{collapsedSize:s=0,collapsible:u}=i,c=n[o];if(null==c||t!==c){n[o]=t;let{onCollapse:e,onExpand:r,onResize:l}=a;l&&l(t,c),u&&(e||r)&&(r&&(null==c||es(c,s))&&!es(t,s)&&r(),e&&(null==c||!es(c,s))&&es(t,s)&&e())}})}function eb(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ew(e){try{if("undefined"!=typeof localStorage)e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function ez(e){return"react-resizable-panels:".concat(e)}function ek(e){return e.map(e=>{let{constraints:t,id:n,idIsFromProps:r,order:l}=e;return r?n:l?"".concat(l,":").concat(JSON.stringify(t)):JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function ej(e,t){try{let n=ez(e),r=t.getItem(n);if(r){let e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(e){}return null}function eC(e,t,n,r,l){var a;let i=ez(e),o=ek(t),s=null!=(a=ej(e,l))?a:{};s[o]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{l.setItem(i,JSON.stringify(s))}catch(e){console.error(e)}}function eS(e){let{layout:t,panelConstraints:n}=e,r=[...t],l=r.reduce((e,t)=>e+t,0);if(r.length!==n.length)throw Error("Invalid ".concat(n.length," panel layout: ").concat(r.map(e=>"".concat(e,"%")).join(", ")));if(!eu(l,100)&&r.length>0)for(let e=0;e<n.length;e++){let t=r[e];ei(null!=t,"No layout data found for index ".concat(e));let n=100/l*t;r[e]=n}let a=0;for(let e=0;e<n.length;e++){let t=r[e];ei(null!=t,"No layout data found for index ".concat(e));let l=ec({panelConstraints:n,panelIndex:e,size:t});t!=l&&(a+=t-l,r[e]=l)}if(!eu(a,0))for(let e=0;e<n.length;e++){let t=r[e];ei(null!=t,"No layout data found for index ".concat(e));let l=ec({panelConstraints:n,panelIndex:e,size:t+a});if(t!==l&&(a-=l-t,r[e]=l,eu(a,0)))break}return r}let eE={getItem:e=>(ew(eE),eE.getItem(e)),setItem:(e,t)=>{ew(eE),eE.setItem(e,t)}},eN={};function eM(e){let{autoSaveId:t=null,children:n,className:r="",direction:a,forwardedRef:i,id:o=null,onLayout:s=null,keyboardResizeBy:u=null,storage:c=eE,style:d,tagName:f="div",...p}=e,h=S(o),m=(0,l.useRef)(null),[g,x]=(0,l.useState)(null),[v,y]=(0,l.useState)([]),k=function(){let[e,t]=(0,l.useState)(0);return(0,l.useCallback)(()=>t(e=>e+1),[])}(),j=(0,l.useRef)({}),C=(0,l.useRef)(new Map),E=(0,l.useRef)(0),N=(0,l.useRef)({autoSaveId:t,direction:a,dragState:g,id:h,keyboardResizeBy:u,onLayout:s,storage:c}),M=(0,l.useRef)({layout:v,panelDataArray:[],panelDataArrayChanged:!1});(0,l.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,l.useImperativeHandle)(i,()=>({getId:()=>N.current.id,getLayout:()=>{let{layout:e}=M.current;return e},setLayout:e=>{let{onLayout:t}=N.current,{layout:n,panelDataArray:r}=M.current,l=eS({layout:e,panelConstraints:r.map(e=>e.constraints)});ex(n,l)||(y(l),M.current.layout=l,t&&t(l),ey(r,l,j.current))}}),[]),z(()=>{N.current.autoSaveId=t,N.current.direction=a,N.current.dragState=g,N.current.id=h,N.current.onLayout=s,N.current.storage=c}),function(e){let{committedValuesRef:t,eagerValuesRef:n,groupId:r,layout:a,panelDataArray:i,panelGroupElement:o,setLayout:s}=e;(0,l.useRef)({didWarnAboutMissingResizeHandle:!1}),z(()=>{if(!o)return;let e=ef(r,o);for(let t=0;t<i.length-1;t++){let{valueMax:n,valueMin:r,valueNow:l}=function(e){let{layout:t,panelsArray:n,pivotIndices:r}=e,l=0,a=100,i=0,o=0,s=r[0];return ei(null!=s,"No pivot index found"),n.forEach((e,t)=>{let{constraints:n}=e,{maxSize:r=100,minSize:u=0}=n;t===s?(l=u,a=r):(i+=u,o+=r)}),{valueMax:Math.min(a,100-i),valueMin:Math.max(l,100-o),valueNow:t[s]}}({layout:a,panelsArray:i,pivotIndices:[t,t+1]}),o=e[t];if(null==o);else{let e=i[t];ei(e,'No panel data found for index "'.concat(t,'"')),o.setAttribute("aria-controls",e.id),o.setAttribute("aria-valuemax",""+Math.round(n)),o.setAttribute("aria-valuemin",""+Math.round(r)),o.setAttribute("aria-valuenow",null!=l?""+Math.round(l):"")}}return()=>{e.forEach((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[r,a,i,o]),(0,l.useEffect)(()=>{if(!o)return;let e=n.current;ei(e,"Eager values not found");let{panelDataArray:t}=e;ei(null!=em(r,o),'No group found for id "'.concat(r,'"'));let l=ef(r,o);ei(l,'No resize handles found for group id "'.concat(r,'"'));let i=l.map(e=>{let n=e.getAttribute(w.resizeHandleId);ei(n,"Resize handle element has no handle id attribute");let[l,i]=function(e,t,n){var r,l,a,i;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,s=eg(t,o),u=ef(e,o),c=s?u.indexOf(s):-1;return[null!=(r=null==(l=n[c])?void 0:l.id)?r:null,null!=(a=null==(i=n[c+1])?void 0:i.id)?a:null]}(r,n,t,o);if(null==l||null==i)return()=>{};let u=e=>{if(!e.defaultPrevented&&"Enter"===e.key){e.preventDefault();let i=t.findIndex(e=>e.id===l);if(i>=0){let e=t[i];ei(e,"No panel data found for index ".concat(i));let l=a[i],{collapsedSize:u=0,collapsible:c,minSize:d=0}=e.constraints;if(null!=l&&c){let e=ed({delta:eu(l,u)?d-u:u-l,initialLayout:a,panelConstraints:t.map(e=>e.constraints),pivotIndices:eh(r,n,o),prevLayout:a,trigger:"keyboard"});a!==e&&s(e)}}}};return e.addEventListener("keydown",u),()=>{e.removeEventListener("keydown",u)}});return()=>{i.forEach(e=>e())}},[o,t,n,r,a,i,s])}({committedValuesRef:N,eagerValuesRef:M,groupId:h,layout:v,panelDataArray:M.current.panelDataArray,setLayout:y,panelGroupElement:m.current}),(0,l.useEffect)(()=>{let{panelDataArray:e}=M.current;if(t){if(0===v.length||v.length!==e.length)return;let n=eN[t];null==n&&(n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;return function(){for(var r=arguments.length,l=Array(r),a=0;a<r;a++)l[a]=arguments[a];null!==n&&clearTimeout(n),n=setTimeout(()=>{e(...l)},t)}}(eC,100),eN[t]=n),n(t,[...e],new Map(C.current),v,c)}},[t,v,c]),(0,l.useEffect)(()=>{});let I=(0,l.useCallback)(e=>{let{onLayout:t}=N.current,{layout:n,panelDataArray:r}=M.current;if(e.constraints.collapsible){let l=r.map(e=>e.constraints),{collapsedSize:a=0,panelSize:i,pivotIndices:o}=eR(r,e,n);if(ei(null!=i,'Panel size not found for panel "'.concat(e.id,'"')),!es(i,a)){C.current.set(e.id,i);let s=ed({delta:eP(r,e)===r.length-1?i-a:a-i,initialLayout:n,panelConstraints:l,pivotIndices:o,prevLayout:n,trigger:"imperative-api"});eb(n,s)||(y(s),M.current.layout=s,t&&t(s),ey(r,s,j.current))}}},[]),P=(0,l.useCallback)((e,t)=>{let{onLayout:n}=N.current,{layout:r,panelDataArray:l}=M.current;if(e.constraints.collapsible){let a=l.map(e=>e.constraints),{collapsedSize:i=0,panelSize:o=0,minSize:s=0,pivotIndices:u}=eR(l,e,r),c=null!=t?t:s;if(es(o,i)){let t=C.current.get(e.id),i=null!=t&&t>=c?t:c,s=ed({delta:eP(l,e)===l.length-1?o-i:i-o,initialLayout:r,panelConstraints:a,pivotIndices:u,prevLayout:r,trigger:"imperative-api"});eb(r,s)||(y(s),M.current.layout=s,n&&n(s),ey(l,s,j.current))}}},[]),R=(0,l.useCallback)(e=>{let{layout:t,panelDataArray:n}=M.current,{panelSize:r}=eR(n,e,t);return ei(null!=r,'Panel size not found for panel "'.concat(e.id,'"')),r},[]),D=(0,l.useCallback)((e,t)=>{let{panelDataArray:n}=M.current,r=eP(n,e);return function(e){let{defaultSize:t,dragState:n,layout:r,panelData:l,panelIndex:a,precision:i=3}=e,o=r[a];return{flexBasis:0,flexGrow:null==o?void 0!=t?t.toFixed(i):"1":1===l.length?"1":o.toFixed(i),flexShrink:1,overflow:"hidden",pointerEvents:null!==n?"none":void 0}}({defaultSize:t,dragState:g,layout:v,panelData:n,panelIndex:r})},[g,v]),H=(0,l.useCallback)(e=>{let{layout:t,panelDataArray:n}=M.current,{collapsedSize:r=0,collapsible:l,panelSize:a}=eR(n,e,t);return ei(null!=a,'Panel size not found for panel "'.concat(e.id,'"')),!0===l&&es(a,r)},[]),O=(0,l.useCallback)(e=>{let{layout:t,panelDataArray:n}=M.current,{collapsedSize:r=0,collapsible:l,panelSize:a}=eR(n,e,t);return ei(null!=a,'Panel size not found for panel "'.concat(e.id,'"')),!l||eo(a,r)>0},[]),F=(0,l.useCallback)(e=>{let{panelDataArray:t}=M.current;t.push(e),t.sort((e,t)=>{let n=e.order,r=t.order;return null==n&&null==r?0:null==n?-1:null==r?1:n-r}),M.current.panelDataArrayChanged=!0,k()},[k]);z(()=>{if(M.current.panelDataArrayChanged){M.current.panelDataArrayChanged=!1;let{autoSaveId:l,onLayout:a,storage:i}=N.current,{layout:o,panelDataArray:s}=M.current,u=null;if(l){var e,t,n,r;let a=(e=l,t=s,null!=(r=(null!=(n=ej(e,i))?n:{})[ek(t)])?r:null);a&&(C.current=new Map(Object.entries(a.expandToSizes)),u=a.layout)}null==u&&(u=function(e){let{panelDataArray:t}=e,n=Array(t.length),r=t.map(e=>e.constraints),l=0,a=100;for(let e=0;e<t.length;e++){let t=r[e];ei(t,"Panel constraints not found for index ".concat(e));let{defaultSize:i}=t;null!=i&&(l++,n[e]=i,a-=i)}for(let e=0;e<t.length;e++){let i=r[e];ei(i,"Panel constraints not found for index ".concat(e));let{defaultSize:o}=i;if(null!=o)continue;let s=a/(t.length-l);l++,n[e]=s,a-=s}return n}({panelDataArray:s}));let c=eS({layout:u,panelConstraints:s.map(e=>e.constraints)});ex(o,c)||(y(c),M.current.layout=c,a&&a(c),ey(s,c,j.current))}}),z(()=>{let e=M.current;return()=>{e.layout=[]}},[]);let B=(0,l.useCallback)(e=>{let t=!1,n=m.current;return n&&"rtl"===window.getComputedStyle(n,null).getPropertyValue("direction")&&(t=!0),function(n){var r,l;n.preventDefault();let a=m.current;if(!a)return()=>null;let{direction:i,dragState:o,id:s,keyboardResizeBy:u,onLayout:c}=N.current,{layout:d,panelDataArray:f}=M.current,{initialLayout:p}=null!=o?o:{},h=eh(s,e,a),g=function(e,t,n,r,l,a){if(A(e)){let t="horizontal"===n,r=0;r=e.shiftKey?100:null!=l?l:10;let a=0;switch(e.key){case"ArrowDown":a=t?0:r;break;case"ArrowLeft":a=t?-r:0;break;case"ArrowRight":a=t?r:0;break;case"ArrowUp":a=t?0:-r;break;case"End":a=100;break;case"Home":a=-100}return a}return null==r?0:function(e,t,n,r,l){let a="horizontal"===n,i=eg(t,l);ei(i,'No resize handle element found for id "'.concat(t,'"'));let o=i.getAttribute(w.groupId);ei(o,"Resize handle element has no group id attribute");let{initialCursorPosition:s}=r,u=ev(n,e),c=em(o,l);ei(c,'No group element found for id "'.concat(o,'"'));let d=c.getBoundingClientRect();return(u-s)/(a?d.width:d.height)*100}(e,t,n,r,a)}(n,e,i,o,u,a),x="horizontal"===i;x&&t&&(g=-g);let v=ed({delta:g,initialLayout:null!=p?p:d,panelConstraints:f.map(e=>e.constraints),pivotIndices:h,prevLayout:d,trigger:A(n)?"keyboard":"mouse-or-touch"}),b=!eb(d,v);(L(n)||T(n))&&E.current!=g&&((E.current=g,b||0===g)?Y.set(e,0):x?(r=g<0?_:V,Y.set(e,r)):(l=g<0?J:W,Y.set(e,l))),b&&(y(v),M.current.layout=v,c&&c(v),ey(f,v,j.current))}},[]),G=(0,l.useCallback)((e,t)=>{let{onLayout:n}=N.current,{layout:r,panelDataArray:l}=M.current,a=l.map(e=>e.constraints),{panelSize:i,pivotIndices:o}=eR(l,e,r);ei(null!=i,'Panel size not found for panel "'.concat(e.id,'"'));let s=ed({delta:eP(l,e)===l.length-1?i-t:t-i,initialLayout:r,panelConstraints:a,pivotIndices:o,prevLayout:r,trigger:"imperative-api"});eb(r,s)||(y(s),M.current.layout=s,n&&n(s),ey(l,s,j.current))},[]),q=(0,l.useCallback)((e,t)=>{let{layout:n,panelDataArray:r}=M.current,{collapsedSize:l=0,collapsible:a}=t,{collapsedSize:i=0,collapsible:o,maxSize:s=100,minSize:u=0}=e.constraints,{panelSize:c}=eR(r,e,n);null!=c&&(a&&o&&es(c,l)?es(l,i)||G(e,i):c<u?G(e,u):c>s&&G(e,s))},[G]),U=(0,l.useCallback)((e,t)=>{let{direction:n}=N.current,{layout:r}=M.current;if(!m.current)return;let l=eg(e,m.current);ei(l,'Drag handle element not found for id "'.concat(e,'"'));let a=ev(n,t);x({dragHandleId:e,dragHandleRect:l.getBoundingClientRect(),initialCursorPosition:a,initialLayout:r})},[]),X=(0,l.useCallback)(()=>{x(null)},[]),K=(0,l.useCallback)(e=>{let{panelDataArray:t}=M.current,n=eP(t,e);n>=0&&(t.splice(n,1),delete j.current[e.id],M.current.panelDataArrayChanged=!0,k())},[k]),Q=(0,l.useMemo)(()=>({collapsePanel:I,direction:a,dragState:g,expandPanel:P,getPanelSize:R,getPanelStyle:D,groupId:h,isPanelCollapsed:H,isPanelExpanded:O,reevaluatePanelConstraints:q,registerPanel:F,registerResizeHandle:B,resizePanel:G,startDragging:U,stopDragging:X,unregisterPanel:K,panelGroupElement:m.current}),[I,g,a,P,R,D,h,H,O,q,F,B,G,U,X,K]);return(0,l.createElement)(b.Provider,{value:Q},(0,l.createElement)(f,{...p,children:n,className:r,id:o,ref:m,style:{display:"flex",flexDirection:"horizontal"===a?"row":"column",height:"100%",overflow:"hidden",width:"100%",...d},[w.group]:"",[w.groupDirection]:a,[w.groupId]:h}))}let eI=(0,l.forwardRef)((e,t)=>(0,l.createElement)(eM,{...e,forwardedRef:t}));function eP(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function eR(e,t,n){let r=eP(e,t),l=r===e.length-1,a=n[r];return{...t.constraints,panelSize:a,pivotIndices:l?[r-1,r]:[r,r+1]}}function eA(e){var t,n;let{children:r=null,className:a="",disabled:i=!1,hitAreaMargins:o,id:s,onBlur:u,onClick:c,onDragging:d,onFocus:f,onPointerDown:p,onPointerUp:h,style:m={},tabIndex:g=0,tagName:x="div",...v}=e,y=(0,l.useRef)(null),k=(0,l.useRef)({onClick:c,onDragging:d,onPointerDown:p,onPointerUp:h});(0,l.useEffect)(()=>{k.current.onClick=c,k.current.onDragging=d,k.current.onPointerDown=p,k.current.onPointerUp=h});let j=(0,l.useContext)(b);if(null===j)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:C,groupId:E,registerResizeHandle:N,startDragging:M,stopDragging:I,panelGroupElement:P}=j,R=S(s),[A,L]=(0,l.useState)("inactive"),[T,D]=(0,l.useState)(!1),[H,O]=(0,l.useState)(null),F=(0,l.useRef)({state:A});z(()=>{F.current.state=A}),(0,l.useEffect)(()=>{if(i)O(null);else{let e=N(R);O(()=>e)}},[i,R,N]);let B=null!=(t=null==o?void 0:o.coarse)?t:15,G=null!=(n=null==o?void 0:o.fine)?n:5;return(0,l.useEffect)(()=>{if(i||null==H)return;let e=y.current;ei(e,"Element ref not attached");let t=!1;return function(e,t,n,r,l){var a;let{ownerDocument:i}=t,o={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:l},s=null!=(a=K.get(i))?a:0;return K.set(i,s+1),Q.add(o),el(),function(){var t;Y.delete(e),Q.delete(o);let n=null!=(t=K.get(i))?t:1;if(K.set(i,n-1),el(),1===n&&K.delete(i),U.includes(o)){let e=U.indexOf(o);e>=0&&U.splice(e,1),er(),l("up",!0,null)}}}(R,e,C,{coarse:B,fine:G},(e,n,r)=>{if(!n)return void L("inactive");switch(e){case"down":{L("drag"),t=!1,ei(r,'Expected event to be defined for "down" action'),M(R,r);let{onDragging:e,onPointerDown:n}=k.current;null==e||e(!0),null==n||n();break}case"move":{let{state:e}=F.current;t=!0,"drag"!==e&&L("hover"),ei(r,'Expected event to be defined for "move" action'),H(r);break}case"up":{L("hover"),I();let{onClick:e,onDragging:n,onPointerUp:r}=k.current;null==n||n(!1),null==r||r(),t||null==e||e()}}})},[B,C,i,G,N,R,H,M,I]),!function(e){let{disabled:t,handleId:n,resizeHandler:r,panelGroupElement:a}=e;(0,l.useEffect)(()=>{if(t||null==r||null==a)return;let e=eg(n,a);if(null==e)return;let l=t=>{if(!t.defaultPrevented)switch(t.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":t.preventDefault(),r(t);break;case"F6":{t.preventDefault();let r=e.getAttribute(w.groupId);ei(r,'No group element found for id "'.concat(r,'"'));let l=ef(r,a),i=ep(r,n,a);ei(null!==i,'No resize element found for id "'.concat(n,'"'));let o=t.shiftKey?i>0?i-1:l.length-1:i+1<l.length?i+1:0;l[o].focus()}}};return e.addEventListener("keydown",l),()=>{e.removeEventListener("keydown",l)}},[a,t,n,r])}({disabled:i,handleId:R,resizeHandler:H,panelGroupElement:P}),(0,l.createElement)(x,{...v,children:r,className:a,id:s,onBlur:()=>{D(!1),null==u||u()},onFocus:()=>{D(!0),null==f||f()},ref:y,role:"separator",style:{touchAction:"none",userSelect:"none",...m},tabIndex:g,[w.groupDirection]:C,[w.groupId]:E,[w.resizeHandle]:"",[w.resizeHandleActive]:"drag"===A?"pointer":T?"keyboard":void 0,[w.resizeHandleEnabled]:!i,[w.resizeHandleId]:R,[w.resizeHandleState]:A})}eM.displayName="PanelGroup",eI.displayName="forwardRef(PanelGroup)",eA.displayName="PanelResizeHandle";var eL=e.i(80064);function eT(e){let{className:t,...n}=e;return(0,r.jsx)(eI,{"data-slot":"resizable-panel-group",className:(0,eL.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})}function eD(e){let{...t}=e;return(0,r.jsx)(N,{"data-slot":"resizable-panel",...t})}function eH(e){let{withHandle:t,className:n,...l}=e;return(0,r.jsx)(eA,{"data-slot":"resizable-handle",className:(0,eL.cn)("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...l,children:t&&(0,r.jsx)("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:(0,r.jsx)(y,{className:"size-2.5"})})})}let eO=e=>{let{}=e,t=(0,v.useMapStore)(e=>e.layerSidebarVisible),n=(0,v.useMapStore)(e=>e.toggleSidebar),l=(0,v.useMapStore)(e=>e.drawings),o=(0,v.useMapStore)(e=>e.triggerDelete),p=(0,v.useMapStore)(e=>e.markers),h=(0,v.useMapStore)(e=>e.toggleMarkerVisibility),m=(0,v.useMapStore)(e=>e.deleteMarker),g=(0,v.useMapStore)(e=>e.setActiveMarker),x=e=>{g(e),n("marker")};if(console.log(l),t)return(0,r.jsxs)(eT,{direction:"vertical",className:"h-[96vh] max-h-[96vh] w-[260px] max-w-[260px] rounded-lg border bg-white shadow-xl overflow-hidden absolute top-4 left-4 z-10",children:[(0,r.jsxs)(eD,{defaultSize:50,minSize:20,maxSize:80,children:[(0,r.jsx)("div",{className:"p-2 flex flex-row items-center justify-between",children:(0,r.jsx)(f.XIcon,{onClick:()=>n("layer"),className:"absolute right-2 top-2 w-8 h-8",color:"black"})}),(0,r.jsxs)("h3",{className:"pb-4 pl-4 font-semibold flex items-center gap-2",children:[(0,r.jsx)(i.Pin,{className:"w-4 h-4"})," Marcadores"]}),(0,r.jsx)("div",{className:"flex flex-col h-full overflow-y-auto px-4 pb-4",children:(0,r.jsx)("div",{className:"space-y-2",children:p.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between px-2 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition cursor-pointer",onClick:()=>null==x?void 0:x(e.id),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full border",style:{background:e.background}}),(0,r.jsxs)("div",{className:"flex flex-col max-w-[100px]",children:[(0,r.jsx)("span",{className:"font-medium text-gray-800 truncate",children:e.title||"Sin nombre"}),e.title&&(0,r.jsx)("span",{className:"text-xs text-gray-500 truncate",children:e.title})]})]}),(0,r.jsxs)("div",{className:"flex items-center ",children:[e.draggable&&(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 bg-emerald-100 text-emerald-800 rounded-full",children:"Drag"}),(0,r.jsx)(a.Button,{size:"icon",variant:"ghost",onClick:t=>{t.stopPropagation(),null==h||h(e.id)},title:e.visible?"Ocultar":"Mostrar",children:e.visible?(0,r.jsx)(c.Eye,{className:"w-4 h-4"}):(0,r.jsx)(d,{className:"w-4 h-4"})}),(0,r.jsx)(a.Button,{size:"icon",variant:"ghost",onClick:t=>{t.stopPropagation(),null==m||m(e.id)},title:"Eliminar",children:(0,r.jsx)(u.Trash2,{className:"w-4 h-4 text-red-500"})})]})]},e.id))})})]}),(0,r.jsx)(eH,{}),(0,r.jsx)(eD,{defaultSize:50,minSize:20,maxSize:80,children:(0,r.jsx)(eT,{direction:"vertical",className:"h-full",children:(0,r.jsx)(eD,{defaultSize:50,minSize:10,maxSize:90,children:(0,r.jsxs)("div",{className:"flex flex-col h-full overflow-y-auto p-4",children:[(0,r.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,r.jsx)(s,{className:"w-4 h-4"})," Geometria"]}),(0,r.jsx)("div",{className:"space-y-2",children:l.map(e=>{let t=eF(null==e?void 0:e.properties.mode);return(0,r.jsxs)("div",{className:"flex flex-row items-center justify-start p-2 bg-muted/40 rounded-lg hover:bg-muted/60 transition cursor-pointer gap-4",children:[(0,r.jsx)(t,{}),(0,r.jsx)("span",{className:"truncate",children:e.title||"Sin nombre"}),(0,r.jsxs)("div",{className:"ml-auto flex items-center ",children:[(0,r.jsx)(a.Button,{size:"icon",variant:"ghost",onClick:t=>{t.stopPropagation(),null==h||h(e.id)},title:e.visible?"Ocultar":"Mostrar",children:e.visible?(0,r.jsx)(c.Eye,{className:"w-4 h-4"}):(0,r.jsx)(d,{className:"w-4 h-4"})}),(0,r.jsx)(a.Button,{size:"icon",variant:"ghost",onClick:t=>{t.stopPropagation(),null==o||o(e.id)},title:"Eliminar",children:(0,r.jsx)(u.Trash2,{className:"w-4 h-4 text-red-500"})})]})]},e.id)})})]})})})})]})};function eF(e){return({point:m.CircleDot,rectangle:p.Square,polygon:x.Shapes,linestring:g.Minus,circle:h.Circle})[e]||h.Circle}}]);